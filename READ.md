
## 项目介绍

当前的APP是一个类似 warp 的 跨平台(Windows/Macos)的桌面应用，核心是一个终端工具，主要面向的是开发者。
核心功能除了终端的基本功能之外(同步用户配置功能(该功能后期添加))，还额外提供一些插件:

- 核心功能
  - 基础 ssh 功能
    - 主要布局
      - 顶部终端tab区域、显示区域、输入区域
        - 终端tab区域说明
          - 特殊页面 也就是 终端页面的入口，每增加一个页面，都是进入的这个页面
            - 这里展示 一个 终端列表(数据先本地存储，存储json数据)，用于展示所有填写的终端，双击后方便快速连接，列表 标题为：快速连接，标题右侧 有 清空的按钮，用于删除所有终端，以及一个 添加终端的按钮
            - 编辑||添加 终端页面
              - 默认就是 SSH连接
                - 字段如下：
                  - 名称 主机 端口 备注
                  - 认证类型： 密码、公钥 选择密码就显示密码的 input，公钥是选择文件，点击确定无误后，会将数据添加到 终端列表中，用户需要再次双击 某个列表数据才能进入 开始ssh连接
          - 其他的每一个 页面都是一个终端，最右侧的tab的右侧 会有一个 + 的icon，用于添加
        - 输入区域说明
          - 上方小提示块儿 显示当前 环境+用户名+路径 例如 (base) PS C:\Users\Administrator> 注意，这里一定是通过ssh连接成功后返回的信息进行的渲染和展示，尽量不干涉，只提取内容，必要的时候才会更改
          - 输入区域
          - 下方区域 一般是一些icon 这里先不实现
    - 功能
      - 连接状态管理（断线重连）
      - 会话持久化
      - 需要解决编码问题 中文字符和其他字符
      - 在输入区域
        - 鼠标捕获后，如果按上下 则需要和ssh交互 获取历史记录
        - 提供自动补全（如输入 conda 提示 install）。
        - 支持多行输入（如脚本执行）。
      - 支持流式输出（如 conda install 的实时进度）。
      - 快捷键功能(该功能后期添加)
- 额外插件
  - 1 当前终端连接的设备 的 设备情况
    - 设备性能展示 如 CPU、内存(交换内存)、磁盘使用率、上下行网速, 展示方式例如：使用折线图（CPU/内存随时间变化）或数字面板（实时百分比）。
    - 支持用户自定义刷新频率（如 1s、5s）以降低资源占用。
  - 2 当前路径的dir列表
  - 3 当前终端连接的设备 的 软件情况
    - php
    - mysql
    - redis
    - docker
    - node
    - conda
    - python
    - nvidia
    - nvidia 的 nvcc
    - ...
    - 补充
      - 未安装时的安装引导
        - 提示安装命令 或 下载连接
      - 支持扩展,允许用户自定义检测软件列表如通过配置文件(后期迭代再实现，这里不做深入)

## 项目实现框架

### 核心技术栈

框架选择： Rust + Ratatui
🛠️ 核心技术栈

1. UI 层
    - UI 层：Ratatui + crossterm 实现终端 UI（tab 列表、输入/输出区域），unicode-width 处理中文字符，eframe/egui 实现性能监控（折线图）和软件列表（表格）。
    - 使用线程（std::thread 或 tokio）管理 Ratatui 和 egui 窗口。
2. 网络/SSH 层
   - tokio - 异步运行时（SSH 连接、命令执行）。
   - ssh2 - SSH 连接（密码/公钥）。
   - tokio-util - 异步数据流处理。
   - 错误处理：支持断线重连（3 次重试），处理连接失败/超时。
3. 系统监控层
   - sysinfo - 获取 CPU/内存/磁盘/网速。
   - tokio::time - 定时刷新（1s/5s）。
   - 可选：pnet 增强网速监控。
4. 数据处理层
   - serde + serde_json - JSON 配置（终端列表：name, host, port, auth, remark）。
   - dirs - 用户目录（如 ~/.config/dev-tool）。
   - uuid - 会话 ID。
5. 跨平台
   - std::env::consts::OS 适配本地命令（brew vs. winget）。
   - Windows 支持 WSL 检测。

### 实现之前的要求

1. 使用 cargo install cargo-edit + cargo upgrade 来升级依赖，必要时使用 cargo upgrade --incompatible
2. 安装依赖的时候 应该首选不冲突且版本最新的为主 也就是 cargo add xxxx
3. 最重要的一点：实现的时候 要简约+优雅 并且 在功能合理的前提下，代码一定要符合设计模式，例如单一职责
4. 不允许使用 #[allow(dead_code)] 的代码解决警告，应该去正确的实现逻辑
5. 解决问题的时候 应该从根源去解决，而非临时方案替代
6. 每次修复完成之后 将整个项目 从 cargo check 检查出来的警告 全部都要修复，如果涉及到 某个 不存在 或者 临时的占位符 没有写具体逻辑，要补充进去
7. 每一个icon和文字的组合的按钮 都应该是 左边icon右侧中文文字，且被按钮包围，且icon使用的是图标库的icon

## 项目其他说明

- utils 下 的 logger.rs 是全局应用日志系统，日志会存储到 指定的.log 文件中
  - 重要的功能的某些进度下需要记录 例如 ssh的 连接成功(连接信息)、连接失败(失败原因)、断开等 都需要记录
- 在菜单也称为tabs中，每一个tab都成为页面，也称为终端，这里我统称tab
  - tab有两个展示方式
    - 一个是统一的 终端列表
    - 一个是终端界面
      - 终端内容区域
      - 终端输入区域
  - tab 有两个状态
    - tab_id 区分展示方式，是在点击连接按钮后立即赋值的
    - ssh 中的连接状态 就是实际的连接状态
    - tab 大致的成员
      - title
      - tab_id
      - connection_info
      - ssh_manager
      - ssh_status
      - ...

## 项目相关指令

~~~sh
# 初始化项目
cargo init ay-dev-tool-rust --bin

# 检查项目是否有问题
cargo check

# 运行项目
cargo run

# 格式化所有文件
cargo fmt
~~~
